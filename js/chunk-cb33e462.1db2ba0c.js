(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb33e462"],{"1c59":function(t,e,i){},"202c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("blog-top",{attrs:{routerPath:"message"}}),e("side-bar",{attrs:{data:t.website.sideBar}}),e("div",{staticClass:"page-container"},[e("div",{staticClass:"section"},[e("div",{staticClass:"page"},[e("div",{staticClass:"title"},[e("el-divider",{attrs:{"content-position":"center","data-aos":"zoom-in"}},[e("span",{staticClass:"message-divider"},[t._v("留言板")])]),e("p",{attrs:{"data-aos":"fade-right"}},[t._v("\n                        推心置腹的谈话就是心灵的展示！！！\n                    ")])],1),e("el-input",{attrs:{placeholder:"该怎么称呼您呢？~"},model:{value:t.event.comment_name,callback:function(e){t.$set(t.event,"comment_name",e)},expression:"event.comment_name"}},[e("template",{slot:"prepend"},[t._v("昵称")])],2),e("div",{staticClass:"comment",attrs:{"data-aos":"fade-up"}},[e("el-input",{staticStyle:{"white-space":"pre-line","margin-top":"20px"},attrs:{type:"textarea",autosize:{minRows:6,maxRows:20},placeholder:"说点什么吧~",resize:"none"},model:{value:t.event.comment_value,callback:function(e){t.$set(t.event,"comment_value",e)},expression:"event.comment_value"}}),e("el-button",{staticClass:"submit",attrs:{type:"success",size:"small"},on:{click:t.submit}},[t._v("提交")]),e("vue-emoji",{on:{select:t.selectEmoji}}),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-input",{attrs:{placeholder:"留下您的qq号吧~",clearable:""},model:{value:t.event.qq_id,callback:function(e){t.$set(t.event,"qq_id",e)},expression:"event.qq_id"}})],1),e("el-col",{attrs:{span:18}},[e("el-alert",{attrs:{title:"PS: 可选填，qq号仅作为之后联系使用！",type:"info",closable:!1}})],1)],1),e("el-divider"),e("comment-board2",{attrs:{data:t.commentList,current:this.page.current,size:this.page.size,noMore:t.noMore},on:{loadData:t.loadComment}})],1)],1)])])],1)},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),o=i("2f62"),r=i("53d0"),c=function(){var t=this,e=t._self._c;return e("div",[t.data&&0!=t.data.length?t._e():e("p",{staticStyle:{"padding-top":"15px"}},[t._v("暂无评论，我来发表第一篇评论！")]),e("ul",{staticClass:"blog-comment"},t._l(t.data,(function(n,s){return e("li",{key:s},[e("div",{staticClass:"comment-parent"},[e("a",{attrs:{href:"javascript:void(0);"}},[e("el-avatar",{staticClass:"avatar",attrs:{src:n.commentatorAvatar}},[e("img",{attrs:{src:i("32ec")}})])],1),e("div",{staticClass:"info"},[e("span",{staticClass:"username"},[e("a",{attrs:{href:"javascript:void(0);"}},[t._v(t._s(n.comment_name))])]),n.is_me?e("el-tag",{staticClass:"tag",attrs:{color:"orange",size:"mini",effect:"dark"}},[t._v("博主")]):t._e()],1),e("div",{staticClass:"content comment-text",domProps:{innerHTML:t._s(t.createEmoji(n.comment_value))}}),e("p",{staticClass:"info info-footer"},[e("span",{staticClass:"aux-word"},[e("i",{staticClass:"iconfont icon-shijian"}),t._v(t._s(n.time)+"\n                      ")]),e("span",{staticClass:"aux-word"},[e("i",{staticClass:"iconfont icon-qq"}),t._v(t._s(n.qq_id)+"\n                      ")])])])])})),0),t.loading&&!t.noMore?e("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"50px"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)"}}):t._e(),t.noMore?e("p",{staticStyle:{color:"red"},attrs:{align:"center"}},[t._v("没有更多了")]):t._e()],1)},l=[],m=(i("a481"),i("c5f6"),i("5e2f")),d=i("6aac");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var v={name:"commentBoard",data:function(){return{value:"",recomment:{},commentList:[],isActive:null,isActiveParent:null,loading:!1}},props:{data:{type:Array,default:function(){return[]}},current:{type:Number,default:1},size:{type:Number,default:10},noMore:{type:Boolean,default:!1}},components:{vueEmoji:m["a"]},watch:{data:function(t){this.initComment(t)}},computed:h(h({},Object(o["b"])(["blogger"])),{},{disabled:function(){return this.loading||this.noMore}}),created:function(){this.initComment()},methods:{initComment:function(t){var e=this.data;if(t){e=t;var i={};for(var n in e)if(e[n]){var s={hide:!0,placeholder:"说点什么吧~"};i[e[n].id]=s}this.commentList=i,this.isActive=null,this.isActiveParent=null,this.value=""}},loadData:function(){var t=this,e={current:this.current+1,size:this.size};this.loading=!0,this.$emit("loadData",e),setTimeout((function(){t.loading=!1}),2e3)},reply:function(t){if(this.value="",this.recomment=t,t.parentId){if(t.id===this.isActive)this.isActive=null,this.isActiveParent=null;else{if(this.isActiveParent){var e=this.commentList[this.isActiveParent];e.hide=!e.hide,e.placeholder="说点什么吧~",this.$set(this.commentList,this.isActiveParent,e)}this.isActive=t.id,this.isActiveParent=t.parentId}var i=this.commentList[t.parentId];i.hide=!i.hide,i.placeholder="回复【"+t.responder+"】",this.$set(this.commentList,t.parentId,i)}else{if(t.id===this.isActive)this.isActive=null,this.isActiveParent=null;else{if(this.isActiveParent){var n=this.commentList[this.isActiveParent];n.hide=!n.hide,n.placeholder="说点什么吧~",this.$set(this.commentList,this.isActiveParent,n)}this.isActive=t.id,this.isActiveParent=t.id}var s=this.commentList[t.id];s.hide=!s.hide,s.placeholder="回复【"+t.commentator+"】",this.$set(this.commentList,t.id,s)}},selectEmoji:function(t){this.value+=t},createEmoji:function(t){return t?t.replace(/:[0-9a-z_-]{1,}:/g,d["a"]).replace(/\n|\r\n/g,"<br>"):""},submit:function(t,e){var i=this;if(this.value){var n={value:this.value,id:this.isActive,index:e,obj:this.recomment};this.$emit("submit",n),setTimeout((function(){i.value="",i.recomment={};var e=i.commentList[t];e.hide=!e.hide,e.placeholder="说点什么吧~",i.$set(i.commentList,t,e),i.isActive=null,i.isActiveParent=null}),1e3)}else this.$message({message:"回复内容不能为空呦!",type:"warning"})}}},p=v,f=(i("d587"),i("2877")),g=Object(f["a"])(p,c,l,!1,null,"52c7fd20",null),b=g.exports,_=i("9623"),y=(i("c54a"),i("89d1"));function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function j(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var w={name:"message",components:{BlogTop:r["a"],CommentBoard2:b,vueEmoji:m["a"],SideBar:_["a"]},data:function(){return{type:"4",email:"",commentList:[],value:"",page:{current:1,size:10},noMore:!1,week:["SUN","MON","TUE","WED","THU","FRI","SAT"],event:{id:0,commentatorAvatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",comment_name:"",is_me:0,comment_value:"",time:"",qq_id:""},comment_all:null}},computed:j({},Object(o["b"])(["website"])),mounted:function(){this.loadComment()},methods:{loadComment:function(){var t=this;Object(y["e"])().then((function(e){var i=e.data;t.comment_all=e.data,console.log("结果是：",i),i&&i.records&&i.records.length>0?(t.commentList=i.records,t.page.current=i.current):setTimeout((function(){t.noMore=!0}),2e3)}))},selectEmoji:function(t){this.event.comment_value+=t},submit:function(){var t=this;if(this.event.comment_value){var e=new Date,i=this.zeroPadding(e.getHours(),2)+":"+this.zeroPadding(e.getMinutes(),2)+":"+this.zeroPadding(e.getSeconds(),2),n=this.zeroPadding(e.getFullYear(),4)+"-"+this.zeroPadding(e.getMonth()+1,2)+"-"+this.zeroPadding(e.getDate(),2)+" "+this.week[e.getDay()];this.event.time=n+" "+i,"HelloQiLin"==this.event.comment_name&&(this.event.is_me=1),this.comment_all.records.push(this.event),console.log("哈哈哈",this.comment_all),Object(y["b"])(this.comment_all).then((function(e){t.commentList=[],t.event.comment_name="",t.event.time="",t.event.comment_value="",t.event.qq_id="",t.event.is_me=0,t.loadComment()}))}else this.$message({message:"评论内容不能为空呦!",type:"warning"})},zeroPadding:function(t,e){for(var i="",n=0;n<e;n++)i+="0";return(i+t).slice(-e)}}},P=w,x=(i("f560"),Object(f["a"])(P,n,s,!1,null,"1aded0a7",null));e["default"]=x.exports},"41f1":function(t,e,i){},9623:function(t,e,i){"use strict";i("7f7f");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"side-bar"},t._l(t.data,(function(i,n){return e("div",{key:n,staticClass:"box"},[e("router-link",{attrs:{to:{path:i.path}}},[e("div",{ref:"side",refInFor:!0,class:["side","bg-0"+n]},[e("span",{staticClass:"side-content"},[t._v(t._s(i.name))])])])],1)})),0)},s=[],a=i("e3c4"),o={name:"sideBar",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{time:null}},created:function(){var t=this,e=this;this.$nextTick((function(){t.time=setTimeout((function(){e.showSide()}),800)}))},methods:{showSide:function(){var t=Object(a["a"])({name:"showSide"});if("undefined"==typeof t&&!t&&this.data&&this.data.length>0){var e=500;this.$refs.side.filter((function(t){setTimeout((function(){t.style.cssText="position: relative;left: 100%;margin-left: -32px;box-shadow: 0 -8px 8px -8px rgba(0,0,0,.5),0 8px 8px -8px rgba(0,0,0,.5);transition: all .3s ease-in-out;"}),e),e+=500,setTimeout((function(){t.style.cssText=""}),e)})),Object(a["b"])({name:"showSide",content:!0,type:"session"})}}},beforeDestroy:function(){null!=this.time&&clearTimeout(this.time),this.time=null}},r=o,c=(i("f0e7"),i("2877")),l=Object(c["a"])(r,n,s,!1,null,"4e2afa1c",null);e["a"]=l.exports},bd3d:function(t,e,i){},d587:function(t,e,i){"use strict";i("41f1")},f0e7:function(t,e,i){"use strict";i("bd3d")},f560:function(t,e,i){"use strict";i("1c59")}}]);